<p>Summary of properties used to collateralize commercial mortgage backed securities (CMBS) based on {{usSummary?.total|number}} records
submitted to the Securities and Exchange Commission.</p>

<div *ngIf="usSummary" class="btn-group" dropdown>
    <button dropdownToggle type="button" class="btn btn-primary dropdown-toggle waves-light" mdbRippleRadius>
        {{selectedState ? selectedState.name : 'Select state'}}
    </button>
    <div class="dropdown-menu dropdown-primary dropselect">
        <a *ngFor="let state of states" class="dropdown-item" (click)="onChangeState(state)">{{state.name}}</a>
    </div>
</div>

<table *ngIf="stateUsageSummary" class="table">
  <thead>
    <tr>
      <th>Usage</th>
      <th>NOI</th>
      <th>Value</th>
      <th>Cap Rate</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let useType of stateUsageSummary" (click)="onRowSelect(useType)">
      <th scope="row">{{useType.usage_type}}</th>
      <td>${{useType.average_secnoi|number}}</td>
      <td>${{useType.average_secvalue|number}}</td>
      <td>{{useType.sec_caprate}}
    </tr>
  </tbody>
</table>

<!--div *ngFor="let s of usSummary?.state">
<mat-expansion-panel *ngIf='s.name && s.name !== "Not Available"'>
  <mat-expansion-panel-header>
      {{s.name}}
  </mat-expansion-panel-header>
<p>Breakdown by usage of values on securitization.  Based on {{s.doc_count}} records with an average securitization date of
   {{s.average_secdate}}</p>

  <table class="datatable">
    <thead><tr>
      <th>&nbsp;</th><th colspan="3">Average</th></tr><tr>
      <th>Usage</th>
      <th>NOI</th>
      <th>Property Value</th>

      <th>Cap Rate</th>
    </tr></thead>
    <tbody *ngFor='let u of s.usage; let first = first'>
      <tr *ngIf='first'>
        <td>All ({{s.doc_count|number}})</td>
        <td>${{s.average_secnoi|number}}</td>
        <td>${{s.average_secvalue|number}}</td>
        <td>{{s.sec_caprate}}</td>
      </tr>

    <tr  *ngIf='u.usage_type'>
      <td><a routerLink="/locations/{{s.state}}/{{u.type_code}}"> {{u.usage_type}} </a>
        ({{u.doc_count|number}})</td>
      <td>${{u.average_secnoi|number}}</td>
      <td>${{u.average_secvalue|number}}</td>
      <td>{{u.sec_caprate}}</td>
    </tr>


  </tbody>
  </table>


  <mat-action-row>
    <button mat-button>Click me</button>
  </mat-action-row>
</mat-expansion-panel>
</div-->
